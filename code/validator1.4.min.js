/*
	jQuery Form Validator Plugin v1.4
	Copyright (c) 2011 Daniel Thomson
	
	Licensed under the MIT license:
	http://www.opensource.org/licenses/mit-license.php
*/

(function(a){a.fn.validator=function(l){a.fn.validator.defaults={inputTypes:{textField:{inputName:"firstName",rules:{min:2,max:20,lettersOnly:!0,noSpaces:!0}},textMessage:{inputName:"message",rules:{min:5,max:100,validHTMLTags:"<div>,<p>,<span>,<b>"}},urlField:{inputName:"url",rules:{validURL:!0}},selectBox:{inputName:"selectbox",rules:{selectHasValue:!0,selectNull:"-please select-"},error:"Please select a value for this field",valid:"the field is valid - woot!"},radioBtn:{inputName:"radio1",rules:{radioReq:!0}}, fileData:{inputName:"fileData",rules:{fileType:"doc,txt,html"}},checkboxField:{inputName:"checkboxField",rules:{checkboxMin:1}},date:{inputName:"dateField",rules:{date:!0}}},formClasses:{submitClass:"submitField",resetClass:"reset",requiredClass:"required",optionalClass:"optional",errorClass:"error",errorMessage:"The field has an error!",validClass:"valid",validMessage:"The field should be valid!",fieldActive:"fieldActive",fieldActiveValid:"fieldActiveValid",fieldActiveInvalid:"fieldActiveInvalid"}, longMonths:"january,february,march,april,may,june,july,august,september,october,november,december".split(","),shortMonths:"jan,feb,mar,apr,may,jun,jul,aug,sep,oct,nov,dec".split(","),longDays:"monday,tuesday,wednesday,thursday,friday,saturday,sunday".split(","),shortDays:"mon,tue,wed,thu,fri,sat,sun".split(","),errorCount:0,onChangeValidation:!0};var c=a.extend(!0,{},a.fn.validator.defaults,l),b=a(this),e=a(this).find("."+c.formClasses.requiredClass);a(this).find("."+c.formClasses.optionalClass); var f=a(this).find("."+c.formClasses.requiredClass+", ."+c.formClasses.optionalClass);return this.each(function(){f.each(function(){a(this).focus(function(){a(this).addClass(c.formClasses.fieldActive)});a(this).blur(function(){a(this).removeClass(c.formClasses.fieldActive);a(this).removeClass(c.formClasses.fieldActiveValid);a(this).removeClass(c.formClasses.fieldActiveInvalid);a(this).attr("value")!==""&&a.fn.validator.validateField(a(this),c)});a(this).change(function(){a.fn.validator.validateField(a(this), c)});a(this).keyup(function(){a(this).attr("value")!==""&&c.onChangeValidation==!0&&a.fn.validator.validateField(a(this),c)});(a(this).attr("type")=="checkbox"||a(this).attr("type")=="radio")&&a(this).click(function(){a.fn.validator.validateField(a(this),c)})});b.submit(function(){c.errorCount=0;e.each(function(){a.fn.validator.validateField(a(this),c)});return c.errorCount===0?!0:(b.find("."+c.formClasses.fieldActiveValid).removeClass(c.formClasses.fieldActiveValid),!1)});b.find("."+c.formClasses.resetClass).click(function(){b.find("."+ c.formClasses.errorClass).removeClass(c.formClasses.validClass).removeClass(c.formClasses.fieldActiveValid).removeClass(c.formClasses.fieldActiveInvalid);b.find("."+c.formClasses.errorClass).html("&#42;")})})};a.fn.validator.validateField=function(l,c){var b=!1,e=l.attr("name"),f=l.attr("value"),d,j,k,h,i,g;l.children("option").length>0&&(f=l.children("option:selected").text());f===""&&(b=!0);for(g in c.inputTypes)if(e==c.inputTypes[g].inputName)d=c.inputTypes[g].rules,j=c.inputTypes[g].error,k=c.inputTypes[g].valid; f&&(f=a.fn.validator.stripWhiteSpace(f));for(g in d)if(d.hasOwnProperty(g)){switch(g){case "min":f.length<d[g]&&(b=!0,h="The input is less than the minimum allowed");break;case "max":f.length>d[g]&&(b=!0,h="The input is longer than the maximum allowed");break;case "minValue":parseFloat(f)<d[g]&&(b=!0,h="the value is lower than the minimum value");break;case "maxValue":parseFloat(f)>d[g]&&(b=!0,h="the value is higher than the maximum allowed");break;case "checkboxMin":i=a("input[name="+e+"]:checked"); i.length<d[g]&&(b=!0,h="More options need to be selected");break;case "checkboxMax":i=a("input[name="+e+"]:checked");i.length>d[g]&&(b=!0,h="More than the maximum allowable have been selected");break;case "radioReq":i=a("input[name="+e+"]:checked");i.length>1&&(b=!0,h="More than radio field has been selected");break;case "selectNull":f==d[g]&&(b=!0,h="Please select a value");break;case "fileType":a.fn.validator.isFileValid(f,d[g])||(b=!0,h="The wrong type of file has been selected");break;case "isNumber":d[g]&& !a.fn.validator.isNumber(f)&&(b=!0,h="The value is not a number");break;case "lettersOnly":d[g]&&!a.fn.validator.isText(f)&&(b=!0,h="The input can only be text");break;case "validPassword":d[g]&&!a.fn.validator.isValidPassword(f)&&(b=!0,h="The password has illegal characters");break;case "passConfirm":i=l.attr("title");i=a("input[type='password'][title="+i+"][name!="+e+"]").attr("value");f!=i&&(b=!0,h="The password does not match");break;case "validURL":d[g]&&!a.fn.validator.isValidURL(f)&&(b=!0, h="That is not a valid URL");break;case "validEmail":d[g]&&!a.fn.validator.isValidEmail(f)&&(b=!0,h="That is not a valid email address");break;case "date":if(d[g]===!0&&(i=a.fn.validator.getDateArray(f,c),!i||!a.fn.validator.isValidDate(i,c)))b=!0,h="The date format is not valid";break;case "dateFuture":if(d[g]===!0&&(i=a.fn.validator.getDateArray(f,c),!i||a.fn.validator.dateTense(i,c)!="future"))b=!0,h="The date needs to be in the future";break;case "datePast":if(d[g]===!0&&(i=a.fn.validator.getDateArray(f, c),!i||a.fn.validator.dateTense(i,c)!="past"))b=!0,h="The date needs to be in the past";break;case "checkHTMLTags":d[g]===!0&&a.fn.validator.findHTML(f,c)&&(b=!0,h="The input contains HTML tags");break;case "validHTMLTags":d[g]&&a.fn.validator.findHTMLTags(f,d[g])&&(b=!0,h="The input contains non-valid HTML tags");break;case "noSpaces":d[g]&&f.split(" ").length>1&&(b=!0,h="There are spaces in the input")}b===!0?(i=j?j:h,a("."+c.formClasses.errorClass+"[title="+e+"]").html(i),l.removeClass("fieldActiveValid").addClass("fieldActiveInvalid"), c.errorCount++):(i=k?k:c.formClasses.validMessage,a("."+c.formClasses.errorClass+"[title="+e+"]").html('<span class="'+c.formClasses.validClass+'">'+i+"</span>"),l.removeClass("fieldActiveInvalid").addClass("fieldActiveValid"))}};a.fn.validator.isFileValid=function(a,c){var b=c.split(","),e=a.split("/"),e=e[e.length-1].split("."),e=e[e.length-1],f;for(f=0;f<b.length;f++)if(e==b[f])return!0;return!1};a.fn.validator.isValidURL=function(a){return/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][\-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([\-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([\-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([\-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/.test(a)? !0:!1};a.fn.validator.isValidEmail=function(a){return/^((([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+(\.([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+)*)@((((([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.))*([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.)[\w]{2,4}|(((([0-9]){1,3}\.){3}([0-9]){1,3}))|(\[((([0-9]){1,3}\.){3}([0-9]){1,3})\])))$/.test(a)?!0:!1};a.fn.validator.stripWhiteSpace=function(a){return a.replace(/^\s+|\s+$/g,"")};a.fn.validator.hasWhiteSpace= function(a){return/[\s+]/.test(a)?!0:!1};a.fn.validator.haveValue=function(a){return a.replace(/^\s+|\s+$/g,"")!==""?!0:!1};a.fn.validator.isText=function(a){return/[^a-zA-Z\s]/.test(a)?!1:!0};a.fn.validator.isUsername=function(a){return/[^a-zA-Z0-9\_\s]/.test(a)?!1:!0};a.fn.validator.isNumber=function(a){return/^([\-\+]?[0-9]+[\.]?[0-9]+|[\-\+]?[\.]?[0-9]+){1}$/.test(a)?!0:!1};a.fn.validator.isMoney=function(a){var c=!1;a.split(".")!=void 0&&(c=a.split("."));return c&&c.length==2?c[1].length<3?!0: !1:!0};a.fn.validator.isValidPassword=function(a){return/^[a-zA-Z0-9!\@#\$%\^&\*\(\)\-\+=\.\?]+$/.test(a)?!0:!1};a.fn.validator.findHTMLTags=function(a,c){var b=a,e=c.split(","),f="",d;for(d in e)e.hasOwnProperty(d)&&(f="</?"+e[d].replace(/[<>]/g,"")+"\\s?([a-zA-Z]+=[\"'][^>\"']+[\"']|[^>\"']+)*>",f=RegExp(f,"gi"),b=b.replace(f,""));return/<\/?[a-zA-Z]+\s?([a-zA-Z]+=["'][^>"']+["']|[^>"']+)*>/.test(b)?!0:!1};a.fn.validator.getDateArray=function(a,c){var b,e,f,d,j,a=a.replace(",",""),a=a.replace(/[\s]+?/g, " ");b=a.split(/[\s\-\/]/);for(d=0;d<b.length;d++)b[d]===""&&(b.splice(d,1),d--);for(d in c.longDays)if(c.longDays.hasOwnProperty(d))for(j in b)b.hasOwnProperty(j)&&b[j]==c.longDays[d]&&(e=!0,f=j);for(d in c.shortDays)if(c.shortDays.hasOwnProperty(d))for(j in b)b.hasOwnProperty(j)&&b[j]==c.shortDays[d]&&(e=!0,f=j);for(d in b)b[d]&&(b[d]=b[d].replace(/(st)|(nd)|(rd)|(th)/gi,""));b.length===4&&e===!0&&b.splice(f,1);return b.length==3?b:!1};a.fn.validator.isValidDate=function(a,c){var b=!1,e=!1,f=!1, d,j=/^[0-9]{1,2}$/,k,h,i=31;if(j.test(a[1])&&a[1]>0&&a[1]<13)k=parseInt(a[1],10),b=!0;else{for(d in c.longMonths)a[1].toLowerCase()==c.longMonths[d]&&(k=parseInt(d,10)+1,b=!0);for(d in c.shortMonths)a[1].toLowerCase()==c.shortMonths[d]&&(k=parseInt(d,10)+1,b=!0)}j=/^([0-9]{2}|[0-9]{4})$/;if(j.test(a[2])&&(a[2]>=0&&a[2]<100||a[2]>1E3&&a[2]<3E3))h=a[2],e=!0;k==4||k==6||k==9||k==11?i=30:k===2&&(i=h%4===0&&(h%100!==0||h%400===0)?29:28);a[0]>0&&a[0]<=i&&(f=!0);return f===!0&&b===!0&&e===!0?!0:!1};a.fn.validator.dateTense= function(a,c){var b,e;for(e in c.longMonths)c.longMonths.hasOwnProperty(e)&&(b=(a[1]+"").toLowerCase(),b==c.longMonths[e]&&(a[1]=parseInt(e,10)+1));for(e in c.shortMonths)c.shortMonths.hasOwnProperty(e)&&(b=(a[1]+"").toLowerCase(),b==c.shortMonths[e]&&(a[1]=parseInt(e,10)+1));a[1]-=1;a[2]<100&&(a[2]=parseInt(a[2],10)+2E3);b=new Date;b.setFullYear(a[2],a[1],a[0]);b=Math.round(b.getTime()/864E5);e=new Date;e=Math.round(e.getTime()/864E5);return b>e?"future":b<e?"past":"today"}})(jQuery);