(function(a){a.fn.validator=function(b){a.fn.validator.defaults={inputTypes:{textField:{inputName:"firstName",rules:{min:2,max:20,lettersOnly:true,noSpaces:true}},textMessage:{inputName:"message",rules:{min:5,max:100,validHTMLTags:"<div>,<p>,<span>,<b>"}},passwordField:{inputName:"password",rules:{min:6,max:12,validPassword:true}},confirmPasswordField:{inputName:"confirmpassword",rules:{passConfirm:true}},urlField:{inputName:"url",rules:{validURL:true}},emailField:{inputName:"email",rules:{validEmail:true}}, selectBox:{inputName:"selectbox",rules:{selectHasValue:true,selectNull:"-please select-"},message:"Please select a value for this field"},radioBtn:{inputName:"radio1",rules:{radioReq:true}},fileData:{inputName:"fileData",rules:{fileType:"doc,txt,html"}},checkboxField:{inputName:"checkboxField",rules:{checkboxMin:1}},date:{inputName:"dateField",rules:{date:true}}},formClasses:{submitClass:"submitField",resetClass:"reset",requiredClass:"required",errorClass:"error",validClass:"valid",validMessage:"field should be valid", fieldActive:"fieldActive",fieldActiveValid:"fieldActiveValid",fieldActiveInvalid:"fieldActiveInvalid"},longMonths:["january","february","march","april","may","june","july","august","september","october","november","december"],shortMonths:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],longDays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],shortDays:["mon","tue","wed","thu","fri","sat","sun"],errorCount:0};var d=a.extend(true,{},a.fn.validator.defaults, b),c=a(this),e=a(this).find("."+d.formClasses.requiredClass);this.each(function(){e.each(function(){a(this).focus(function(){a(this).addClass(d.formClasses.fieldActive)});a(this).blur(function(){a(this).removeClass(d.formClasses.fieldActive);a(this).removeClass(d.formClasses.fieldActiveValid);a(this).removeClass(d.formClasses.fieldActiveInvalid)});a(this).change(function(){a(this).hasClass(d.formClasses.requiredClass)&&a.fn.validator.validateField(a(this),d)});a(this).keyup(function(){a(this).hasClass(d.formClasses.requiredClass)&& a(this).attr("value")!=""&&a.fn.validator.validateField(a(this),d)});if((a(this).attr("type")=="checkbox"||a(this).attr("type")=="radio")&&a(this).hasClass(d.formClasses.requiredClass))a(this).click(function(){a.fn.validator.validateField(a(this),d)})});c.submit(function(){d.errorCount=0;e.each(function(){a.fn.validator.validateField(a(this),d)});if(d.errorCount==0)return true;else{alert("you still have "+d.errorCount+" errors in the form");c.find("."+d.formClasses.fieldActiveValid).removeClass(d.formClasses.fieldActiveValid); return false}});c.find("."+d.formClasses.resetClass).click(function(){c.find("."+d.formClasses.errorClass).removeClass(d.formClasses.validClass).removeClass(d.formClasses.fieldActiveValid).removeClass(d.formClasses.fieldActiveInvalid);c.find("."+d.formClasses.errorClass).html("&#42;")})});return this};a.fn.validator.validateField=function(b,d){var c=false,e=b.attr("name"),g=b.attr("value");if(b.children("option").length>0)g=b.children("option:selected").text();if(g=="")c=true;for(var f in d.inputTypes)if(e== d.inputTypes[f].inputName)var h=d.inputTypes[f].rules,m=d.inputTypes[f].message;g=a.fn.validator.stripWhiteSpace(g);for(f in h){switch(f){case "min":if(g.length<h[f]){c=true;var k="The input is less than the minimum required"}break;case "max":if(g.length>h[f]){c=true;k="The input is longer than the minimum required"}break;case "checkboxMin":var l=a("input[name="+e+"]:checked");if(l.length<h[f]){c=true;k="More options need to be selected"}break;case "checkboxMax":l=a("input[name="+e+"]:checked");if(l.length> h[f]){c=true;k="More than the maximum allowable have been selected"}break;case "radioReq":l=a("input[name="+e+"]:checked");if(!l.length>0){c=true;k="More than radio field has been selected"}break;case "selectNull":if(g==h[f]){c=true;k="Please select a value"}break;case "fileType":if(!a.fn.validator.isFileValid(g,h[f])){c=true;k="The wrong type of file has been selected"}break;case "isNumber":if(h[f]&&!a.fn.validator.isNumber(g)){c=true;k="The value is not a number"}break;case "lettersOnly":if(h[f]&& !a.fn.validator.isText(g)){c=true;k="The input can only be text"}break;case "validPassword":if(h[f]&&!a.fn.validator.isValidPassword(g)){c=true;k="The password has illegal characters"}break;case "passConfirm":l=b.attr("title");l=a("input[type='password'][title="+l+"][name!="+e+"]").attr("value");if(g!=l){c=true;k="The password does not match"}break;case "validURL":if(h[f]&&!a.fn.validator.isValidURL(g)){c=true;k="That is not a valid URL"}break;case "validEmail":if(h[f]&&!a.fn.validator.isValidEmail(g)){c= true;k="That is not a valid email address"}break;case "date":if(h[f]==true){l=a.fn.validator.getDateArray(g,d);if(!l||!a.fn.validator.isValidDate(l,d)){c=true;k="The date format is not valid"}}break;case "dateFuture":if(h[f]==true){l=a.fn.validator.getDateArray(g,d);if(!l||a.fn.validator.dateTense(l,d)!="future"){c=true;k="The date needs to be in the future"}}break;case "datePast":if(h[f]==true){l=a.fn.validator.getDateArray(g,d);if(!l||a.fn.validator.dateTense(l,d)!="past"){c=true;k="The date needs to be in the past"}}break; case "checkHTMLTags":if(h[f]==true)if(a.fn.validator.findHTML(g,d)){c=true;k="The input contains HTML tags"}break;case "validHTMLTags":if(h[f]&&a.fn.validator.findHTMLTags(g,h[f])){c=true;k="The input contains non-valid HTML tags"}break;case "noSpaces":if(h[f]&&g.split(" ").length>1){c=true;k="There are spaces in the input"}break;default:}if(c==true){m?a("."+d.formClasses.errorClass+"[title="+e+"]").html(m):a("."+d.formClasses.errorClass+"[title="+e+"]").html(k);d.errorCount++;b.removeClass("fieldActiveValid").addClass("fieldActiveInvalid")}else{a("."+ d.formClasses.errorClass+"[title="+e+"]").html('<span class="'+d.formClasses.validClass+'">'+d.formClasses.validMessage+"</span>");b.removeClass("fieldActiveInvalid").addClass("fieldActiveValid")}}};a.fn.validator.isFileValid=function(b,d){var c=d.split(","),e=b.split("/");e=e[e.length-1].split(".");e=e[e.length-1];for(i=0;i<c.length;i++)if(e==c[i])return true;return false};a.fn.validator.isValidURL=function(b){return/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/.test(b)? true:false};a.fn.validator.isValidEmail=function(b){return/^((([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+(\.([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+)*)@((((([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.))*([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.)[\w]{2,4}|(((([0-9]){1,3}\.){3}([0-9]){1,3}))|(\[((([0-9]){1,3}\.){3}([0-9]){1,3})\])))$/.test(b)?true:false};a.fn.validator.stripWhiteSpace=function(b){return b=b.replace(/^\s+|\s+$/g,"")};a.fn.validator.haveValue= function(b){b.replace(/^\s+|\s+$/g,"");return b!=""?true:false};a.fn.validator.isText=function(b){return/[^a-zA-Z\s]/.test(b)?false:true};a.fn.validator.isNumber=function(b){return/^([\-\+]?[0-9]+[\.]?[0-9]+|[\-\+]?[\.]?[0-9]+){1}$/.test(b)?true:false};a.fn.validator.isValidPassword=function(b){return/^[a-zA-Z0-9!\@#\$%\^&\*\(\)\-\+=\.\?]+$/.test(b)?true:false};a.fn.validator.findHTMLTags=function(b,d){var c=b,e=d.split(","),g="";for(i in e){g="</?"+e[i].replace(/[<>]/g,"")+"\\s?([a-zA-Z]+=[\"'][^>\"']+[\"']|[^>\"']+)*>"; g=RegExp(g,"gi");c=c.replace(g,"")}return/<\/?[a-zA-Z]+\s?([a-zA-Z]+=["'][^>"']+["']|[^>"']+)*>/.test(c)?true:false};a.fn.validator.getDateArray=function(b,d){b=b.replace(",","");b=b.replace(/[\s]+?/g," ");var c=b.split(/[\s-/]/);for(e=0;e<c.length;e++)if(c[e]==""){c.splice(e,1);e--}for(var e in d.longDays)for(j in c)if(c[j]==d.longDays[e])var g=true,f=j;for(e in d.shortDays)for(j in c)if(c[j]==d.shortDays[e]){g=true;f=j}for(e in c)if(c[e])c[e]=c[e].replace(/(st)|(nd)|(rd)|(th)/gi,"");c.length==4&& g==true&&c.splice(f,1);if(c.length==3)return c;return false};a.fn.validator.isValidDate=function(b,d){var c=false,e=false,g=false,f=/^[0-9]{1,2}$/;if(f.test(b[1])&&b[1]>0&&b[1]<13){var h=parseInt(b[1]);c=true}else{for(i in d.longMonths)if(b[1].toLowerCase()==d.longMonths[i]){h=parseInt(i)+1;c=true}for(i in d.shortMonths)if(b[1].toLowerCase()==d.shortMonths[i]){h=parseInt(i)+1;c=true}}f=/^([0-9]{2}|[0-9]{4})$/;if(f.test(b[2])&&(b[2]>=0&&b[2]<100||b[2]>1E3&&b[2]<3E3)){var m=b[2];e=true}f=31;f=h==4|| h==6||h==9||h==11?30:m%4==0&&(m%100!=0||m%400==0)?29:28;if(b[0]>0&&b[0]<=f)g=true;return g==true&&c==true&&e==true?true:false};a.fn.validator.dateTense=function(b,d){for(i in d.longMonths){dateArrayI=(b[1]+"").toLowerCase();if(dateArrayI==d.longMonths[i])b[1]=parseInt(i)+1}for(i in d.shortMonths){dateArrayI=(b[1]+"").toLowerCase();if(dateArrayI==d.shortMonths[i])b[1]=parseInt(i)+1}b[1]-=1;if(b[2]<100)b[2]=parseInt(b[2])+2E3;var c=new Date;c.setFullYear(b[2],b[1],b[0]);c=Math.round(c.getTime()/864E5); var e=new Date;e=Math.round(e.getTime()/864E5);return c>e?"future":c<e?"past":"today"}})(jQuery);